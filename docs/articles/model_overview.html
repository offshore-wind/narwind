<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>1. Overview and workflow • narwind</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="1. Overview and workflow">
<meta property="og:description" content="narwind">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">narwind</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/narwind.html">Get started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/model_overview.html">1. Overview and workflow</a>
    </li>
    <li>
      <a href="../articles/scenarios.html">2. Defining scenarios</a>
    </li>
    <li>
      <a href="../articles/model_run.html">3. Running the model</a>
    </li>
    <li>
      <a href="../articles/model_summary.html">4. Summary and diagnostics</a>
    </li>
    <li>
      <a href="../articles/model_predictions.html">5. Model predictions</a>
    </li>
    <li>
      <a href="../articles/model_export.html">6. Exporting data</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="model_overview_files/font-awesome-5.13.0/js/script.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>1. Overview and workflow</h1>
                        <h4 data-toc-skip class="author">Phil Bouchet,
Enrico Pirotta, Catriona Harris, Len Thomas</h4>
            <address class="author_afil">
      Centre for Research into Ecological &amp; Environmental Modelling,
University of St Andrews<br><h4 data-toc-skip class="date">2024-04-30</h4>
      
      
      <div class="hidden name"><code>model_overview.Rmd</code></div>

    </address>
</div>

    
    
<a href="https://raw.githubusercontent.com/offshore-wind/narwind/498ab57271cf247e8e4fe4cee88cdcf4ee9b022b/vignettes/pdf/1%20Overview%20and%20workflow.pdf" class="external-link">
<button class="btn btn-primary"><i class="fa fa-file-pdf"></i> Download PDF</button>
</a>
<div class="section level2">
<h2 id="preamble">Preamble<a class="anchor" aria-label="anchor" href="#preamble"></a>
</h2>
<p>This tutorial provides a brief description of the bioenergetic model.
For full technical details, please refer to the accompanying project
report.</p>
</div>
<div class="section level2">
<h2 id="model-structure">Model structure<a class="anchor" aria-label="anchor" href="#model-structure"></a>
</h2>
<p>The North Atlantic right whale bioenergetic model implemented in
<code>narwind</code> combines an agent-based model with a stochastic
population model (Figure 1.1). The former is used to understand how
anthropogenic stressors affect NARW survival and health, as defined by a
system of bioenergetic equations that consider NARW behavior and energy
budgets. The insights gained from that model are then used to
parameterize a stochastic population model that yields predictions of
future NARW abundance.</p>
<div class="float">
<img src="BOEM_140M0121C0008_figure1.jpg" alt="Figure 1.1. Schematic representation of the structure of the North Atlantic right whale (NARW, Eubalaena glacialis) population consequences of multiple stressors (PCoMS) framework. The trend shown in the right-hand panel is not based on real data and displayed for illustration purposes only."><div class="figcaption">
<strong>Figure 1.1.</strong> Schematic
representation of the structure of the North Atlantic right whale (NARW,
<em>Eubalaena glacialis</em>) population consequences of multiple
stressors (PCoMS) framework. The trend shown in the right-hand panel is
not based on real data and displayed for illustration purposes
only.</div>
</div>
<div class="section level3">
<h3 id="agent-based-model">Agent-based model<a class="anchor" aria-label="anchor" href="#agent-based-model"></a>
</h3>
<p>In the agent-based model, whale movements are simulated in
two-dimensional space within the extent of the NARW geographic range in
U.S. and Canadian waters, i.e., a 878,225 km<sup>2</sup> area between
Florida and the Gulf of St Lawrence, out to the edge of the continental
shelf and out to the ca. 35 m isobath northward and southward of Cape
Hatteras (35.25°N, 75.54°W), respectively. This spatial domain includes
all grid cell locations where NARW density is predicted to exceed 0.001
whales per 25 km<sup>2</sup> in any month of the year and was chosen to
ensure that simulated movements are constrained to reasonable depth
bounds whilst maximizing coverage of NARW sightings reported in the
NARWC database (i.e., 97.4% of sightings logged as of June 6, 2022). The
domain is further divided into ten regional polygons encompassing
critical NARW habitats (e.g., calving grounds, foraging grounds,
migratory corridors) (Figure 1.2). Note that the model excludes a
vertical (depth) component, as knowledge of NARW diving physiology and
behavior remains too limited to parameterize a three-dimensional model
with dive-by-dive resolution.</p>
<div class="float">
<img src="BOEM_140M0121C0008_figure2.jpg" alt="Figure 1.2. Spatial domain of the agent-based model."><div class="figcaption">
<strong>Figure 1.2.</strong> Spatial domain of
the agent-based model.</div>
</div>
<p>The agent-based model proceeds in discrete daily time steps.
Simulations are run for a total of 15 months (i.e., 457 days), starting
on the first day of October. This includes an initial ‘burn-in’ period
of 3 months (i.e., 92 days – also called a ‘warm-up’), which allows
agents to converge to a stable equilibrium state that adequately
reflects the ecological processes being modeled. Data from the burn-in
phase are discarded from the analysis to reduce initialization bias and
minimize potential errors in the estimation of model parameters. Model
outputs therefore cover a full calendar year (i.e., duration of 12
months) spanning the period January 1 through to December 31.</p>
<p>The model is run using the <code><a href="../reference/narw.html">narw()</a></code> function in
<code>narwind</code> (see the relevant tutorial). When
<code><a href="../reference/narw.html">narw()</a></code> is called, several things happen behind the scenes
(Figure 1.3):</p>
<ul>
<li><p>First, the model is initialized by loading required data,
generating stressor surfaces from offshore wind scenario parameters, and
setting up virtual agents.</p></li>
<li><p>Next, the simulation engine of the agent-based model loops over
days and agents, keeping track of the condition of individuals (black
diamonds) at each time step. Simulations are performed separately for
each of six population cohorts (i.e., juvenile males, juvenile females,
adult males, adult females (resting), adult females (pregnant), and
adult females (lactating, with dependent calves). These run in parallel
on different cores to maximize efficiency.</p></li>
<li><p>Upon completion of the simulation, the survival and health of
agents in each cohort at the end of the 15 months are modeled as a
function of their initial body condition (i.e., relative fat mass). The
resulting relationships underpin inference of future population trends
obtained under the stochastic population model.</p></li>
</ul>
<div class="float">
<img src="BOEM_140M0121C0008_figure3.jpg" alt="Figure 1.3. Structure and operational flow of the agent-based model."><div class="figcaption">
<strong>Figure 1.3.</strong> Structure and
operational flow of the agent-based model.</div>
</div>
<p>Note that, contrary to other agent-based models of marine mammals,
simulated NARW movements are not conditional on individual health, prey
availability, or human disturbance. Agents also do not build an inherent
memory map of where favorable plankton patches are located, nor do
patches deplete after being visited by agents. Every day, agents
assimilate energy from ingested food and allocate available energy to
fulfil their daily metabolic requirements. If assimilated energy exceeds
the combined costs of resting metabolism, activity, somatic growth, and
reproduction (i.e., gestation or lactation), then the surplus energy is
stored as blubber, thereby increasing the individual’s body condition
(or relative fat mass). By contrast, if assimilated energy is
insufficient to cover these combined costs, then existing reserve tissue
is catabolized to meet the animal’s daily needs. In these circumstances,
an agent’s body condition will be lower on the next day. Fluctuations in
individual health therefore stem from both variability in prey
availability along an agent’s movement path and individual energy
demands. We assume that poor health compromises reproductive attempts,
such that females may abort their pregnancy if their reserve mass falls
to critically low levels and is insufficient to sustain their daily
energetic costs and avoid the onset of starvation. Similarly, lactation
is interrupted following the death of a calf.</p>
<p>The agent-based model is spatially explicit and is informed by
several raster surfaces that relate to key model parameters, such as
prey density or noise levels. These are updated either daily or monthly
in the simulation, depending on available data (Table 1).</p>
<p><strong>Table 1</strong>. Spatial layers used to define the
simulation landscape.</p>
<table class="table">
<colgroup>
<col width="23%">
<col width="23%">
<col width="29%">
<col width="23%">
</colgroup>
<thead><tr class="header">
<th>Raster</th>
<th>Resolution</th>
<th>Derived from</th>
<th>Source(s) / Data providers</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Strike risk</td>
<td>Monthly (10x10 km)</td>
<td>Records of sea-going vessel movements as captured by Automatic
Identification Systems (AIS)</td>
<td>NOAA Fisheries (U.S. waters), MERIDIAN (Canadian waters)</td>
</tr>
<tr class="even">
<td>Entanglement risk</td>
<td>Monthly (5x5 km)</td>
<td>Risk estimates from NOAA’s Decision Support Tool, complemented by a
comparative analysis of fishing effort within northern U.S. vs. Canadian
waters</td>
<td>NOAA Fisheries (U.S. waters), North Atlantic Fisheries Organization
(Canadian waters)</td>
</tr>
<tr class="odd">
<td>Pile-driving noise</td>
<td>Daily (5x5 km)</td>
<td>Simple acoustic propagation model, which assumes that transmission
loss is dependent on log-range and frequency-specific absorption</td>
<td>-</td>
</tr>
<tr class="even">
<td>Prey concentration</td>
<td>Monthly (10x10 km)</td>
<td>Predictions from a depth-integrated species distribution model for
<em>Calanus finmarchicus</em>, <em>Calanus hyperboreus</em>, and
<em>Calanus glacialis</em>
</td>
<td>Fisheries and Oceans Canada</td>
</tr>
<tr class="odd">
<td>Right whale density</td>
<td>Monthly (5x5 km)</td>
<td>Predictions from density surface models developed from shipboard and
aerial survey data</td>
<td>Duke University (MGEL)</td>
</tr>
</tbody>
</table>
<p>The package contains all the surfaces required to undertake an
assessment of NARW abundance under three hypothetical offshore wind
development scenarios (see Tutorial 2), as well as under baseline
conditions in the absence of wind farm construction activities.
<code>narwind</code> allows users to develop their own custom scenarios
of offshore wind development using an interactive Shiny app (see
Tutorial 2). However, model parameters (including the raster surfaces
listed in Table 1) are not readily accessible to package users. Any
updates to these require changes to the source code, which is reserved
for developers.</p>
</div>
<div class="section level3">
<h3 id="population-model">Population model<a class="anchor" aria-label="anchor" href="#population-model"></a>
</h3>
<p>In <code>narwind</code>, predictions of future NARW abundance are
derived from a stochastic population model (see Tutorial 5). This is
another simulation model, wherein the survival, reproductive status, and
health of individuals in the current (i.e., real) NARW population are
tracked through time. The model operates in yearly increments and is not
spatially explicit. Births and deaths are simulated probabilistically
based on estimates of survival and fecundity obtained from the
agent-based model.</p>
</div>
</div>
<div class="section level2">
<h2 id="analytical-workflow">Analytical workflow<a class="anchor" aria-label="anchor" href="#analytical-workflow"></a>
</h2>
<p>In <code>narwind</code>, a typical modeling workflow consists of five
steps (Figure 1.4), all of which are covered in detail in subsequent
tutorials. These include:</p>
<ol style="list-style-type: decimal">
<li><p>Defining the parameters of one or more target offshore wind
scenario(s) using the <code><a href="../reference/scenario.html">scenario()</a></code> function.</p></li>
<li><p>Running agent-based simulations using the <code><a href="../reference/narw.html">narw()</a></code>
function, including in the absence of wind farm development activities
(i.e., baseline conditions).</p></li>
<li><p>Inspecting, visualizing, and summarizing model outputs using the
<code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>, <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>, and <code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code>
methods.</p></li>
<li><p>Estimating uncertainty associated with health and survival
functions, to be propagated into population projections [optional] using
the <code>augment()</code> function.</p></li>
<li><p>Forecasting right whale abundance using the
<code><a href="https://rdrr.io/r/stats/predict.html" class="external-link">predict()</a></code> method.</p></li>
</ol>
<p>Optionally, the <code>export()</code> method can be used to save data
on disk for further analysis/reporting.</p>
<div style="width:550px">
<div class="float">
<img src="narwind_workflow.jpg" alt="Figure 1.4. Schematic representation of a typical narwind workflow. Package functions and object classes are indicated in coloured font."><div class="figcaption">
<strong>Figure 1.4.</strong> Schematic
representation of a typical narwind workflow. Package functions and
object classes are indicated in coloured font.</div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by P. Bouchet, E. Pirotta, J. Hewitt, R. Schick, C. Harris, L. Thomas.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
